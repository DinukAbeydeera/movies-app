extends ../layout

block content
  .page-head
    h1 Movies
    if currentUser
      a.btn.btn-primary(href="/movies/new") + Add Movie

  if movies && movies.length
    .grid
      each m in movies
        .card
          .card-body
            h3.card-title
              a(href=`/movies/${m._id}`)= m.name
            p.text-muted #{m.year}#{m.genres && m.genres.length ? ' Â· ' + m.genres.join(', ') : ''}
            if m.rating != null
              .badge Rating: #{m.rating}
            .byline Posted by #{m.createdBy ? m.createdBy.username : 'unknown'}
  else
    .empty
      h3 No movies yet
      p.text-muted Add your first movie to get started.
      if currentUser
        a.btn.btn-primary(href="/movies/new") Add Movie

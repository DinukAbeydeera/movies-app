extends ../layout

block content
  if mode === 'edit'
    h1 Edit Movie
    - const action = `/movies/${movie._id}?_method=PUT`
  else
    h1 Add Movie
    - const action = '/movies'

  if errors
    .flash-error
      ul
        each e in errors
          li= e.msg

  form(method="POST", action=action).form-grid
    .form-row
      label(for="name") Name
      input#name(type="text", name="name", required, value=movie.name || '')
    .form-row
      label(for="year") Year
      input#year(type="number", name="year", min="1888", value=movie.year || '')
    .form-row.form-span
      label(for="description") Description
      textarea#description(name="description", rows="4")= movie.description || ''
    .form-row
      label(for="genres") Genres (comma separated)
      input#genres(type="text", name="genres", placeholder="Drama, Action", value=(movie.genres && movie.genres.join(', ')) || '')
    .form-row
      label(for="rating") Rating (0â€“10)
      input#rating(type="number", step="0.1", min="0", max="10", name="rating", value=(movie.rating!=null?movie.rating:''))
    .actions.form-span
      button.btn.btn-primary(type="submit") #{mode === 'edit' ? 'Update Movie' : 'Create Movie'}
      a.btn.btn-outline(href="/movies") Cancel

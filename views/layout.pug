doctype html
html
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title= title || 'Movies App'
    link(rel="stylesheet", href="/css/styles.css")
    script.
      document.addEventListener('DOMContentLoaded', function () {
        const btn = document.getElementById('menu-toggle');
        const menu = document.getElementById('dropdown-menu');
        if (!btn || !menu) return;

        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          menu.classList.toggle('show');
        });
        document.addEventListener('click', (e) => {
          if (!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove('show');
        });
        menu.querySelectorAll('a').forEach(a => a.addEventListener('click', ()=> menu.classList.remove('show')));
      });
  body
    header.navbar
      .brand
        a(href="/") ðŸŽ¬ Movies App
      button#menu-toggle.nav-toggle(type="button" aria-label="Toggle navigation") â˜°
      ul#dropdown-menu.nav-links
        li: a(href="/") Home
        li: a(href="/movies") Movies
        if !currentUser
          li: a(href="/login") Login
          li: a(href="/register") Register
        else
          li: a(href="/movies/new") Add Movie
          li: a(href="/logout") Logout

    .container
      if success && success.length
        .flash-success= Array.isArray(success) ? success.join(', ') : success
      if error && error.length
        .flash-error= Array.isArray(error) ? error.join(', ') : error
      if success_msg && success_msg.length
        .flash-success= success_msg
      if error_msg && error_msg.length
        .flash-error= error_msg

      block content

    footer.site-footer
      p Â© #{new Date().getFullYear()} Movies App Â· Built with Express, Pug & MongoDB
